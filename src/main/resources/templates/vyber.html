<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="">
<head>
    <meta charset="UTF-8">
    <title>V√Ωbƒõr jazyka</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <meta http-equiv="refresh" content="10">
</head>
<body class="bg-light">

<div class="container py-5">

    <div class="d-flex justify-content-between align-items-center mb-5 bg-white p-4 rounded shadow-sm">
        <div>
            <h2 class="mb-0">Volba 2. ciz√≠ho jazyka</h2>
            <p class="text-muted mb-0">
                P≈ôihl√°≈°en√Ω student: <strong th:text="${student.jmeno} + ' ' + ${student.prijmeni}">Jan Nov√°k</strong>
            </p>
        </div>
        <a href="/logout" class="btn btn-outline-danger">Odhl√°sit se</a>
    </div>

    <div th:if="${success}" class="alert alert-success shadow-sm" th:text="${success}"></div>
    <div th:if="${error}" class="alert alert-danger shadow-sm" th:text="${error}"></div>

    <div th:if="${mojeVolba != null}" class="text-center py-5">
        <div class="card shadow mx-auto border-success" style="max-width: 600px;">
            <div class="card-body p-5">
                <h1 class="display-1 text-success">‚úÖ</h1>
                <h3 class="mt-3">M√°te hotovo!</h3>
                <p class="lead">Zvolil(a) jste si: <strong class="text-success" th:text="${mojeVolba.jazyk.nazevJazyka}">Nƒõmƒçina</strong></p>
                <hr>
                <p class="text-muted small">Volba byla ulo≈æena.<!-- Pro zmƒõnu kontaktujte veden√≠ ≈°koly. --></p>
            </div>
        </div>
    </div>

    <div th:if="${mojeVolba == null}">
        <p class="lead text-center mb-4">Pros√≠m, zvolte si jeden z dostupn√Ωch jazyk≈Ø. <br>
            <small class="text-muted">Str√°nka se aktualizuje automaticky, sledujte voln√° m√≠sta.</small></p>

        <div class="row g-4">
            <div class="col-md-4" th:each="jazyk : ${jazyky}">
                <div class="card h-100 shadow-sm transition-card"
                     th:classappend="${jazyk.jePlno()} ? 'border-danger bg-secondary-subtle' : 'border-primary'">

                    <div class="card-body text-center d-flex flex-column">
                        <h3 class="card-title fw-bold mb-3" th:text="${jazyk.nazevJazyka}">Angliƒçtina</h3>

                        <div class="mt-auto">
                            <div class="d-flex justify-content-between mb-1">
                                <span th:class="${jazyk.jePlno()} ? 'text-danger fw-bold' : 'text-muted'">
                                    <span th:text="${jazyk.jePlno()} ? 'PLNO' : 'Voln√° m√≠sta:'"></span>
                                </span>
                                <span class="fw-bold">
                                    <span th:text="${jazyk.maxKapacita - jazyk.aktualniPocetRegistrovanych}">5</span> /
                                    <span th:text="${jazyk.maxKapacita}">20</span>
                                </span>
                            </div>

                            <div class="progress mb-4" style="height: 15px;">
                                <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar"
                                     th:style="'width: ' + ${(jazyk.aktualniPocetRegistrovanych * 100.0) / jazyk.maxKapacita} + '%'"
                                     th:classappend="${jazyk.jePlno()} ? 'bg-danger' : 'bg-success'">
                                </div>
                            </div>

                            <form action="/zapis-jazyka" method="post">
                                <input type="hidden" name="jazykId" th:value="${jazyk.jazykId}">

                                <button type="submit" class="btn w-100 py-2 fw-bold"
                                        th:classappend="${jazyk.jePlno()} ? 'btn-secondary disabled' : 'btn-primary'"
                                        th:disabled="${jazyk.jePlno()}">
                                    <span th:text="${jazyk.jePlno()} ? 'Obsazeno üîí' : 'Zvolit tento jazyk üëâ'"></span>
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>

</body>
</html>