<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="">
<head>
    <title>P≈ôehled registrac√≠</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        @media print {
            .no-print { display: none; }
            .page-break { page-break-after: always; }
        }
    </style>
</head>
<body class="bg-light">

<div class="container py-5">

    <div class="d-flex justify-content-between align-items-center mb-4 no-print">
        <h2>Seznam student≈Ø podle jazyk≈Ø</h2>
        <div>
            <button onclick="window.print()" class="btn btn-primary me-2">üñ®Ô∏è Tisk</button>
            <a href="/admin/logout" class="btn btn-outline-danger">Odhl√°sit</a>
        </div>
    </div>

    <div th:each="jazyk : ${jazyky}" class="card mb-5 shadow-sm page-break">
        <div class="card-header bg-white d-flex justify-content-between align-items-center py-3">
            <h3 class="m-0 text-primary" th:text="${jazyk.nazevJazyka}">Jazyk</h3>
            <span class="badge bg-secondary fs-6">
                Stav: <span th:text="${jazyk.aktualniPocetRegistrovanych}"></span> / <span th:text="${jazyk.maxKapacita}"></span>
            </span>
        </div>

        <div class="card-body p-0">
            <div th:if="${jazyk.registrace.isEmpty()}" class="p-4 text-muted text-center">
                Zat√≠m se nikdo nep≈ôihl√°sil.
            </div>

            <table th:if="${!jazyk.registrace.isEmpty()}" class="table table-striped table-hover mb-0 align-middle">
                <thead class="table-light">
                <tr>
                    <th style="width: 50px;">#</th>
                    <th>P≈ô√≠jmen√≠</th>
                    <th>Jm√©no</th>
                    <th>Rodn√© ƒç√≠slo</th>
                    <th class="text-end">ƒåas z√°pisu</th>
                    <th class="text-center" style="width: 100px;">Akce</th> </tr>
                </thead>
                <tbody>
                <tr th:each="reg, rowStat : ${jazyk.registrace}">
                    <td class="fw-bold text-muted" th:text="${rowStat.count} + '.'">1.</td>
                    <td class="fw-bold" th:text="${reg.student.prijmeni}">Nov√°k</td>
                    <td th:text="${reg.student.jmeno}">Jan</td>
                    <td class="font-monospace" th:text="${reg.student.rodneCislo}">050101/1234</td>
                    <td class="text-end text-muted small"
                        th:text="${#temporals.format(reg.datumRegistrace, 'dd.MM.yyyy HH:mm')}">
                    </td>
                    <td class="text-center">
                        <form action="/admin/zrusit-registraci" method="post"
                              onsubmit="return confirm('Opravdu chcete zru≈°it registraci tomuto studentovi?');">
                            <input type="hidden" name="registraceId" th:value="${reg.registraceId}">
                            <button type="submit" class="btn btn-sm btn-outline-danger">‚ùå</button>
                        </form>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
</body>
</html>